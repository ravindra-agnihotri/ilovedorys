<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Dory's Bakehouse ‚Äì Our Products</title>

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Poppins:wght@400;500;600&display=swap" rel="stylesheet">

<style>
/* ================================
   THEME (matching index page)
================================ */
:root{
    --bg: rgba(255, 243, 207, 0.45);
    --accent: #563e30;
    --text: #563e30;
    --muted: #6e5a52;
    --card: rgba(253,239,193,0.45);
}

body{
    margin:0;
    font-family:Poppins, system-ui;
    background:var(--bg);
    overflow-x:hidden;
}

/* ================================
   HEADER
================================ */
header{
    width:100%;
    background:#fff;
    padding:14px 20px;
    box-shadow:0 2px 8px rgba(0,0,0,0.1);
    position:sticky;
    top:0;
    z-index:1000;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
}

header img.logo{
    height:64px;
    width:auto;
}

.home-btn{
    position:absolute;
    left:20px;
    background:var(--accent);
    color:#fff;
    padding:8px 14px;
    border-radius:8px;
    text-decoration:none;
    font-size:14px;
}

.contact-btn{
    position:absolute;
    right:20px;
    background:var(--accent);
    color:#fff;
    padding:8px 14px;
    border-radius:8px;
    text-decoration:none;
    font-size:14px;
}

/* ================================
   TITLE
================================ */
h2{
    text-align:center;
    font-family:'Great Vibes', cursive;
    font-size:42px;
    margin:20px 0 10px;
    color:var(--text);
}

/* ================================
   FILTER BUTTONS
================================ */
.filter-bar{
    display:flex;
    justify-content:center;
    gap:10px;
    margin:10px 0 20px;
    flex-wrap:wrap;
}

.filter-btn{
    background:var(--accent);
    color:#fff;
    padding:8px 14px;
    border-radius:8px;
    font-size:14px;
    cursor:pointer;
    border:0;
}

.filter-btn.active{
    background:#ff7f7f;
}

/* ================================
   PRODUCT GRID
================================ */
.grid{
    max-width:1300px;
    margin:0 auto;
    padding:10px 16px 40px;
    display:grid;
    grid-template-columns:repeat(auto-fill, minmax(220px,1fr));
    gap:18px;
}

.card{
    background:var(--card);
    padding:10px;
    border-radius:12px;
    box-shadow:0 4px 12px rgba(0,0,0,0.1);
    overflow:hidden;
    position:relative;
    transition:0.25s;
}

.card img{
    width:100%;
    height:180px;
    object-fit:cover;
    border-radius:10px;
    user-select:none;
}

/* Hover overlay for "Enquire" */
.card .hover-overlay{
    position:absolute;
    inset:0;
    background:rgba(0,0,0,0.45);
    display:flex;
    justify-content:center;
    align-items:center;
    opacity:0;
    transition:0.25s;
}

.card:hover .hover-overlay{
    opacity:1;
}

.enquire-btn{
    background:#ff7f7f;
    color:#fff;
    padding:10px 16px;
    border-radius:8px;
    font-size:14px;
    cursor:pointer;
    border:0;
}

/* Product text */
.card-title{
    font-size:16px;
    font-weight:600;
    color:var(--text);
    margin-top:8px;
}

.card-cat{
    font-size:13px;
    color:var(--muted);
    margin-top:2px;
}

.card-price{
    font-size:15px;
    font-weight:600;
    margin-top:4px;
    color:#272727;
}

/* ================================
   MINI POPUP (Enquiry)
================================ */
.enquiry-popup{
    position:fixed;
    z-index:3000;
    background:#fff;
    padding:18px;
    border-radius:12px;
    box-shadow:0 8px 24px rgba(0,0,0,0.3);
    width:90%;
    max-width:360px;
    display:none;
}

.enquiry-popup img{
    width:100px;
    height:100px;
    object-fit:cover;
    border-radius:10px;
}

.enquiry-popup h3{
    margin:10px 0 4px;
    color:var(--text);
    font-size:18px;
}

.enquiry-popup p{
    margin:4px 0;
    font-size:14px;
}

.popup-row{
    display:flex;
    gap:14px;
}

textarea{
    width:100%;
    height:70px;
    margin-top:10px;
    border-radius:8px;
    padding:8px;
    border:1px solid #ccc;
}

.send-btn{
    background:#25D366;
    color:#fff;
    padding:10px 16px;
    border-radius:8px;
    width:100%;
    border:0;
    margin-top:12px;
    font-size:15px;
}

.close-mini{
    position:absolute;
    top:8px;
    right:12px;
    font-size:20px;
    cursor:pointer;
}

/* ================================
   FLOATING BUTTONS
================================ */
.floating-buttons{
    position:fixed;
    right:25px;
    bottom:25px;
    display:flex;
    flex-direction:column;
    gap:12px;
    z-index:2000;
}

.whatsapp-btn,.chat-btn{
    width:55px;
    height:55px;
    border-radius:50%;
    display:flex;
    align-items:center;
    justify-content:center;
    box-shadow:0 6px 18px rgba(0,0,0,0.25);
    cursor:pointer;
}

.whatsapp-btn{background:#25D366;}
.chat-btn{background:#ff7f7f;}

.floating-buttons img{width:28px;height:28px;}

/* ================================
   MANAGE PRODUCTS BUTTON
================================ */
#manageFloating{
    position:fixed;
    left:20px;
    bottom:30px;
    background:var(--accent);
    color:#fff;
    padding:10px 18px;
    border-radius:10px;
    text-decoration:none;
    font-size:14px;
    display:none; /* admin only */
    z-index:2000;
}

/* ================================
   CONTACT POPUP (same as index)
================================ */
.popup-overlay{
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.45);
    display:none;
    justify-content:center;
    align-items:center;
    z-index:5000;
}

.popup-box{
    background:#faebe3;
    padding:22px;
    border-radius:14px;
    text-align:center;
    width:90%;
    max-width:320px;
}

.popup-box h3{
    margin:0;
    font-size:20px;
    color:var(--text);
}

.close-btn{
    margin-top:14px;
    background:var(--accent);
    color:#fff;
    padding:10px 18px;
    border-radius:8px;
    cursor:pointer;
}
</style>
</head>
<body>

<!-- HEADER -->
<header>
    <a class="home-btn" href="/index.html">Home</a>
    <img class="logo" src="/logo/dorys.PNG">
    <a class="contact-btn" onclick="openContact()">Contact</a>
</header>

<h2>Our Products</h2>

<!-- FILTER BAR -->
<div class="filter-bar">
    <button class="filter-btn active" data-cat="all">All</button>
    <button class="filter-btn" data-cat="Cakes">Cakes</button>
    <button class="filter-btn" data-cat="Cupcakes">Cupcakes</button>
    <button class="filter-btn" data-cat="Pastries">Pastries</button>
</div>

<!-- PRODUCTS GRID -->
<div class="grid" id="grid"></div>

<!-- FLOATING BUTTONS -->
<div class="floating-buttons">
    <div class="chat-btn" onclick="openContact()">
        <img src="https://cdn-icons-png.flaticon.com/512/134/134914.png">
    </div>
    <a class="whatsapp-btn" target="_blank" href="https://wa.me/9168445014">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg">
    </a>
</div>

<!-- MANAGE PRODUCTS BUTTON -->
<a id="manageFloating" href="/admin-products.html">Manage Products</a>

<!-- ENQUIRY MINI POPUP -->
<div class="enquiry-popup" id="enqBox">
    <span class="close-mini" onclick="closeEnq()">√ó</span>
    <div class="popup-row">
        <img id="enqImg">
        <div>
            <h3 id="enqName"></h3>
            <p id="enqCat"></p>
            <p id="enqPrice"></p>
        </div>
    </div>
    <textarea id="enqMsg" placeholder="Your message..."></textarea>
    <button class="send-btn" onclick="sendEnquiry()">Send on WhatsApp</button>
</div>

<!-- CONTACT POPUP -->
<div class="popup-overlay" id="contactPopup">
    <div class="popup-box">
        <h3>Contact Us</h3>
        <p>üìû <a href="tel:+917972032790" style="text-decoration:none;color:var(--text);font-weight:700">+91 7972032790</a></p>
        <p>üìç Dory's Bakehouse, Pune</p>
        <div class="close-btn" onclick="closeContact()">Close</div>
    </div>
</div>

<script>
/* ==========================
   LOAD PRODUCTS
========================== */
async function loadProducts(){
    const res = await fetch('/products/list', {cache:'no-cache'});
    const list = await res.json();
    window.allProducts = list;
    renderProducts('all');
}

/* ==========================
   RENDER PRODUCTS
========================== */
function renderProducts(cat){
    const grid = document.getElementById('grid');
    grid.innerHTML = '';

    window.allProducts
        .filter(p => cat === 'all' || p.category === cat)
        .forEach(p => {

            const div = document.createElement('div');
            div.className = 'card';

            div.innerHTML = `
                <img src="${p.image}">
                <div class="hover-overlay">
                    <button class="enquire-btn" onclick="openEnq('${p.id}')">Enquire Now</button>
                </div>
                <div class="card-title">${p.name}</div>
                <div class="card-cat">${p.category}</div>
                <div class="card-price">‚Çπ ${p.price}</div>
            `;
            grid.appendChild(div);
        });
}

/* ==========================
   FILTERS
========================== */
document.querySelectorAll('.filter-btn').forEach(btn=>{
    btn.onclick = ()=>{
        document.querySelectorAll('.filter-btn').forEach(b=>b.classList.remove('active'));
        btn.classList.add('active');
        renderProducts(btn.dataset.cat);
    };
});

/* ==========================
   ENQUIRY POPUP
========================== */
function openEnq(id){
    const p = window.allProducts.find(x=>x.id===id);
    document.getElementById('enqImg').src = p.image;
    document.getElementById('enqName').textContent = p.name;
    document.getElementById('enqCat').textContent = "Category: " + p.category;
    document.getElementById('enqPrice').textContent = "‚Çπ " + p.price;
    document.getElementById('enqBox').style.display = 'block';

    window.currentProduct = p;
}

function closeEnq(){
    document.getElementById('enqBox').style.display = 'none';
}

function sendEnquiry(){
    const msg = document.getElementById('enqMsg').value;
    const p = window.currentProduct;

    const text = `
Product Enquiry:
Name: ${p.name}
Category: ${p.category}
Price: ‚Çπ ${p.price}

User Message:
${msg}
    `;

    const url = "https://wa.me/9168445014?text=" + encodeURIComponent(text);
    window.open(url, '_blank');
}

/* ==========================
   CONTACT POPUP
========================== */
function openContact(){
    document.getElementById('contactPopup').style.display='flex';
}
function closeContact(){
    document.getElementById('contactPopup').style.display='none';
}

/* ==========================
   ADMIN CHECK
========================== */
function readCookie(name){
    const c=document.cookie.split('; ').find(r=>r.startsWith(name+'='));
    return c?c.split('=')[1]:null;
}

window.addEventListener('DOMContentLoaded', ()=>{
    if(readCookie('admin')==='4321'){
        document.getElementById('manageFloating').style.display='block';
    }
});

/* ==========================
   INIT
========================== */
loadProducts();

</script>
</body>
</html>
